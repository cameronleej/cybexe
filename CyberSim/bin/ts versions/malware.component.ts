import { Inject, Injectable } from "@angular/core";

/**
 * Args - specs = [malwareType, malware strength]
 */
@Injectable()
export class Malware{
    type: string = "";
    level: string = "";
    atkScore: number = 0;

    constructor(@Inject(String) specs:string[]) {
        this.type = specs[0];
        this.level = specs[1];
        this.atkScore = this.adjustAtk(this.type, this.level);
    }


    getAtk() {
		return this.atkScore;
	}

    /**
     * @param type - malware type
     * 
     * Sets base attack score based on type
     */
    private assignAtk(type:string){

        switch(type.toLowerCase()) {
			case "virus": this.atkScore = 50;
				break;
			case "ransomware": this.atkScore = 70;
				break;
			case "trojan": this.atkScore = 55;
				break;
			case "worm": this.atkScore = 60;
				break;
			default: this.atkScore = -1;
		}
    }

    /**
     * @param type - malware type
     * @param level - malware strength
     * @returns modified attack score in range based on base attack score and stregth level
     */
   private adjustAtk(type:string, level:string){
        if(type == null || level == null)
            return -1;

        this.assignAtk(type)
        switch(level.toLowerCase()){
            case "low": this.atkScore =  (this.atkScore * (( Math.random()*40) +  60)/ 100); //Random # between 0.4 and 0.1 as multiplier
				break;
			case "med": this.atkScore = (this.atkScore * ( (Math.random()*40) + 80) / 100); //Random # between 0.8 and 1.2 as a multiplier
				break;
			case "high": this.atkScore = (this.atkScore * ( (Math.random()*40) + 100) / 100); //Random # between 1.0 and 1.4 as a multiplier
				break;
			default: 
				return -1;
        }
        return this.atkScore;
    }



}